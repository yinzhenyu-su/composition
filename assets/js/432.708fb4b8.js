(self.webpackChunkzcomposition=self.webpackChunkzcomposition||[]).push([[432],{4432:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>m});var o=n(6252),a=n(3577),i=n(2262),l=n(5475),s=n(6486);const r=({domSelector:e,maxWait:t=8e3})=>{let n;return new Promise(((o,a)=>{let r=0;(0,l.setInterval)((()=>{(0,i.dq)(e)&&e.value?((0,l.clearInterval)(n),o(e)):(0,s.isFunction)(e)&&e()?((0,l.clearInterval)(n),o(e())):(r+=200,r>=t&&((0,l.clearInterval)(n),a(new Error("Await Dom Timeout."))))}),200)}))},c=(e=>((0,o.dD)("data-v-3e3eb3a2"),e=e(),(0,o.Cn)(),e))((()=>(0,o._)("div",null,"请打开控制台查看dom",-1))),u={key:1,class:"border"},d=(0,o.aZ)({setup(e){const t=(0,i.iH)(null),n=(0,i.iH)(!1),l=(0,i.iH)(null);(0,o.bv)((()=>{setTimeout((()=>{if(document){const e=document.createElement("div");e.setAttribute("class","border"),e.setAttribute("id","use-await-dom-test"),e.innerText="我是dom1的异步子组件",t.value.appendChild(e)}n.value=!0}),2e3)}));const s=(0,i.iH)("dom1 加载中..."),d=(0,i.iH)("dom2 加载中...");return r({domSelector:()=>{if(window&&window.document)return document.querySelector("#use-await-dom-test")}}).then((e=>{s.value="dom1 加载完成",console.log("async dom1 loaded",e)})),r({domSelector:l}).then((e=>{d.value="dom2 加载完成",console.log("async dom2 loaded",e)})),(e,i)=>((0,o.wg)(),(0,o.iD)("div",null,[c,(0,o._)("div",{ref:(e,n)=>{n.father=e,t.value=e},class:"border"},[(0,o._)("div",null,(0,a.zw)(s.value),1)],512),n.value?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"border",ref:(e,t)=>{t.child2=e,l.value=e}},(0,a.zw)(d.value),513)):((0,o.wg)(),(0,o.iD)("div",u,(0,a.zw)(d.value),1))]))}}),m=(0,n(3744).Z)(d,[["__scopeId","data-v-3e3eb3a2"]])},4889:function(){!function(e,t){"use strict";if(!e.setImmediate){var n,o,a,i,l,s=1,r={},c=!1,u=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?n=function(e){process.nextTick((function(){f(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(i="setImmediate$"+Math.random()+"$",l=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(i)&&f(+t.data.slice(i.length))},e.addEventListener?e.addEventListener("message",l,!1):e.attachEvent("onmessage",l),n=function(t){e.postMessage(i+t,"*")}):e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){f(e.data)},n=function(e){a.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(o=u.documentElement,n=function(e){var t=u.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):n=function(e){setTimeout(f,0,e)},d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),o=0;o<t.length;o++)t[o]=arguments[o+1];var a={callback:e,args:t};return r[s]=a,n(s),s++},d.clearImmediate=m}function m(e){delete r[e]}function f(e){if(c)setTimeout(f,0,e);else{var t=r[e];if(t){c=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{m(e),c=!1}}}}}("undefined"==typeof self?"undefined"==typeof global?this:global:self)},5475:function(e,t,n){var o="undefined"!=typeof global&&global||"undefined"!=typeof self&&self||window,a=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(a.call(setTimeout,o,arguments),clearTimeout)},t.setInterval=function(){return new i(a.call(setInterval,o,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(o,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(4889),t.setImmediate="undefined"!=typeof self&&self.setImmediate||"undefined"!=typeof global&&global.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||"undefined"!=typeof global&&global.clearImmediate||this&&this.clearImmediate},3744:(e,t)=>{"use strict";t.Z=(e,t)=>{const n=e.__vccOpts||e;for(const[e,o]of t)n[e]=o;return n}}}]);