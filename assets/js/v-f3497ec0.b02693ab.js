"use strict";(self.webpackChunkzcomposition=self.webpackChunkzcomposition||[]).push([[32],{8155:(n,s,a)=>{a.r(s),a.d(s,{data:()=>t});const t={key:"v-f3497ec0",path:"/composition/Effect/useClipboard/",title:"使用剪贴板",lang:"en-CN",frontmatter:{category:"Browser"},excerpt:"",headers:[{level:2,title:"基本用法",slug:"基本用法",children:[]},{level:2,title:"代码演示",slug:"代码演示",children:[{level:3,title:"参数",slug:"参数",children:[]}]}],filePathRelative:"composition/Effect/useClipboard/README.md",git:{updatedTime:1632830925e3,contributors:[{name:"curryPaste",email:"2771885247@qq.com",commits:1}]}}},8762:(n,s,a)=>{a.r(s),a.d(s,{default:()=>y});var t=a(6252),p=a(2262),e=a(3577),o=a(9963),l=a(1790);const c=(0,t._)("h1",{id:"使用剪贴板",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#使用剪贴板","aria-hidden":"true"},"#"),(0,t.Uk)(" 使用剪贴板")],-1),u=(0,t.Uk)("响应式 "),i={href:"https://developer.mozilla.org/en-US/docs/Web/API/Clipboard_API",target:"_blank",rel:"noopener noreferrer"},r=(0,t.Uk)("剪贴板 API"),k=(0,t.Uk)("，提供响应剪贴板命令（剪切、复制和粘贴）以及异步读取和写入系统剪贴板的能力。未经用户许可，对剪贴板内容的访问受 Permissions API 的限制，不允许读取或更改剪贴板内容。"),d=(0,t._)("h2",{id:"基本用法",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#基本用法","aria-hidden":"true"},"#"),(0,t.Uk)(" 基本用法")],-1),b={key:0,style:{"margin-top":"10px"}},g=(0,t.Uk)(" 剪贴板权限: 读取 "),m=(0,t.Uk)(" | 写 "),h=(0,t.Uk)(" 当前复制: "),v={key:1},f=(0,t.uE)('<h2 id="代码演示" tabindex="-1"><a class="header-anchor" href="#代码演示" aria-hidden="true">#</a> 代码演示</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> usePermission <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;zcomposition&#39;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> useClipboard <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;zcomposition&#39;</span>\n<span class="token keyword">const</span> input <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>\n\n<span class="token keyword">const</span> <span class="token punctuation">{</span> text<span class="token punctuation">,</span> isSupported<span class="token punctuation">,</span> copy <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useClipboard</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token keyword">const</span> permissionRead <span class="token operator">=</span> <span class="token function">usePermission</span><span class="token punctuation">(</span><span class="token string">&#39;clipboard-read&#39;</span><span class="token punctuation">)</span>\n<span class="token keyword">const</span> permissionWrite <span class="token operator">=</span> <span class="token function">usePermission</span><span class="token punctuation">(</span><span class="token string">&#39;clipboard-write&#39;</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isSupported<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">margin-top</span><span class="token punctuation">:</span>10px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>note</span><span class="token punctuation">&gt;</span></span>\n      剪贴板权限: 读取 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">&gt;</span></span>{{ permissionRead }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span> | 写\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">&gt;</span></span>{{ permissionWrite }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>note</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>\n      当前复制: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>code</span><span class="token punctuation">&gt;</span></span>{{ text || &#39;none&#39; }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>code</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>copy(input)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\n      Copy\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>\n    Your browser does not support Clipboard API\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="参数" tabindex="-1"><a class="header-anchor" href="#参数" aria-hidden="true">#</a> 参数</h3><table><thead><tr><th>参数</th><th>说明</th><th>类型</th><th>默认值</th></tr></thead><tbody><tr><td>text</td><td>剪贴板中的文本</td><td>ComputedRef&lt;string&gt;</td><td></td></tr><tr><td>copied</td><td>复制状态</td><td>ComputedRef&lt;boolean&gt;</td><td>-</td></tr><tr><td>copy</td><td>复制事件</td><td>(text)=&gt;Promise&lt;void&gt;</td><td>-</td></tr><tr><td>isSupported</td><td>判断当前节点是否支持某个特性</td><td>boolean</td><td>-</td></tr></tbody></table>',5),y=(0,t.aZ)({setup(n){const s=(0,p.iH)(""),{text:a,isSupported:y,copy:w}=(0,l.VP)(),q=(0,l.gI)("clipboard-read"),x=(0,l.gI)("clipboard-write");return(n,l)=>{const C=(0,t.up)("OutboundLink"),U=(0,t.up)("note");return(0,t.wg)(),(0,t.iD)(t.HY,null,[c,(0,t._)("p",null,[u,(0,t._)("a",i,[r,(0,t.Wm)(C)]),k]),d,(0,p.SU)(y)?((0,t.wg)(),(0,t.iD)("div",b,[(0,t.Wm)(U,null,{default:(0,t.w5)((()=>[g,(0,t._)("b",null,(0,e.zw)((0,p.SU)(q)),1),m,(0,t._)("b",null,(0,e.zw)((0,p.SU)(x)),1)])),_:1}),(0,t._)("p",null,[h,(0,t._)("code",null,(0,e.zw)((0,p.SU)(a)||"none"),1)]),(0,t.wy)((0,t._)("input",{"onUpdate:modelValue":l[0]||(l[0]=n=>s.value=n),type:"text"},null,512),[[o.nr,s.value]]),(0,t._)("button",{onClick:l[1]||(l[1]=n=>(0,p.SU)(w)(s.value))}," Copy ")])):((0,t.wg)(),(0,t.iD)("p",v," Your browser does not support Clipboard API ")),f],64)}}})}}]);